<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>ระบบตารางเวลาแบบหลายขั้นตอน</title>
  <style>
    body { font-family: "Sarabun", sans-serif; max-width: 900px; margin: 20px auto; }
    .hidden { display: none; }
    select, button { padding: 8px; font-size: 16px; margin: 10px 0; }
    table { border-collapse: collapse; width: 100%; margin-top: 15px; }
    th, td { border: 1px solid #444; padding: 8px; text-align: center; }
    th { background: #eee; }
    a { cursor: pointer; color: blue; text-decoration: underline; }
  </style>
</head>
<body>

<h2>ระบบตารางการใช้ห้องเรียน</h2>

<!-- หน้า 1: เลือกอาคาร -->
<div id="step1">
  <h3>1. เลือกอาคาร/วิทยาเขต</h3>
  <ul id="buildingList">
    <!-- รายการอาคารจะถูกเติมโดย JS -->
  </ul>
</div>

<!-- หน้า 2: เลือกห้อง -->
<div id="step2" class="hidden">
  <h3>2. เลือกห้องในอาคาร <span id="selectedBuildingName"></span></h3>
  <select id="roomSelect">
    <!-- รายการห้องเติมโดย JS -->
  </select>
  <br />
  <button id="btnShowSchedule">ดูตาราง</button>
  <br/>
  <a onclick="goBack(1)">กลับไปเลือกอาคาร</a>
</div>

<!-- หน้า 3: ตารางเวลา -->
<div id="step3" class="hidden">
  <h3>3. ตารางเวลาห้อง <span id="selectedRoomName"></span></h3>
  <div id="scheduleTableContainer"></div>
  <br />
  <a onclick="goBack(2)">กลับไปเลือกห้อง</a>
</div>

<script>
  // ข้อมูลจำลอง
  const buildings = [
    { id: "103", name: "อาคารสังคมศาสตร์", rooms: [
      { id: "10301", name: "ห้อง 1" },
      { id: "10302", name: "ห้อง 2" }
    ]},
    { id: "104", name: "อาคารวิทยาศาสตร์", rooms: [
      { id: "10401", name: "LAB 1" },
      { id: "10402", name: "LAB 2" },
      { id: "10403", name: "LAB 3" }
    ]},
    { id: "105", name: "อาคารเกษตร", rooms: [
      { id: "10501", name: "ห้องอบรม 1" },
      { id: "10502", name: "ห้องอบรม 2" }
    ]}
  ];

  // ตารางเวลา (จำลอง)
  // โครงสร้าง: schedule[roomId][day][time] = "ข้อมูล"
  const schedule = {
    "10301": {
      "จันทร์": { "08:00-10:00": "รหัสวิชา 123", "10:00-12:00": "-", "13:00-15:00": "รหัสวิชา 456" },
      "อังคาร": { "08:00-10:00": "-", "10:00-12:00": "รหัสวิชา 789", "13:00-15:00": "-" },
    },
    "10401": {
      "จันทร์": { "08:00-10:00": "LAB เคมี", "10:00-12:00": "LAB ฟิสิกส์", "13:00-15:00": "-" },
      "อังคาร": { "08:00-10:00": "-", "10:00-12:00": "LAB ชีววิทยา", "13:00-15:00": "LAB ฟิสิกส์" },
    }
    // เพิ่มเติมได้ตามต้องการ
  };

  const days = ["จันทร์", "อังคาร", "พุธ", "พฤหัส", "ศุกร์"];
  const times = ["08:00-10:00", "10:00-12:00", "13:00-15:00"];

  const step1 = document.getElementById("step1");
  const step2 = document.getElementById("step2");
  const step3 = document.getElementById("step3");

  const buildingList = document.getElementById("buildingList");
  const selectedBuildingName = document.getElementById("selectedBuildingName");
  const roomSelect = document.getElementById("roomSelect");
  const btnShowSchedule = document.getElementById("btnShowSchedule");
  const selectedRoomName = document.getElementById("selectedRoomName");
  const scheduleTableContainer = document.getElementById("scheduleTableContainer");

  let selectedBuilding = null;
  let selectedRoom = null;

  // แสดงรายการอาคาร
function showSchedule(roomId) {
  selectedRoom = roomSelect.options[roomSelect.selectedIndex].text;
  selectedRoomName.textContent = selectedRoom;

  // ตารางที่คุณให้มา
  const html = `
  <h2>ตารางการใช้ห้อง</h2>
  <table class="schedule-table">
    <thead>
      <tr>
        <th>Day/Time</th>
        <th>08:00-09:00</th>
        <th>09:00-10:00</th>
        <th>10:00-11:00</th>
        <th>11:00-12:00</th>
        <th>12:00-13:00</th>
        <th>13:00-14:00</th>
        <th>14:00-15:00</th>
        <th>15:00-16:00</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="time-col">จันทร์</td>
        <td colspan="2" class="class-block">
          <p>10301231</p>
          <p>(3) 1,</p>
          <p>L1</p>
        </td>
        <td></td>
        <td></td>
        <td></td>
        <td colspan="2" class="class-block">
          <p>10301222</p>
          <p>(3) 1,</p>
          <p>L1</p>
        </td>
        <td></td>
      </tr>
      <tr>
        <td class="time-col">อังคาร</td>
        <td class="class-block">
          <p>10301231</p>
          <p>(3) 1,</p>
          <p>L1</p>
        </td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td colspan="2" class="class-block">
          <p>10301225</p>
          <p>(3) 1,</p>
          <p>L1</p>
        </td>
        <td></td>
      </tr>
      <tr>
        <td class="time-col">พุธ</td>
        <td colspan="2" class="class-block">
          <p>10301112</p>
          <p>(3) 1,</p>
          <p>L1</p>
        </td>
        <td></td><td></td><td></td><td></td><td></td><td></td>
      </tr>
      <tr>
        <td class="time-col">พฤหัสบดี</td>
        <td></td><td></td><td></td><td></td>
        <td></td>
        <td colspan="2" class="class-block">
          <p>10301223</p>
          <p>(3) 1,</p>
          <p>L1</p>
        </td>
        <td></td>
      </tr>
      <tr>
        <td class="time-col">ศุกร์</td>
        <td></td><td></td><td></td><td></td><td></td><td></td>
        <td colspan="2" class="class-block">
          <p>10301223</p>
          <p>(3) 1,</p>
          <p>L1</p>
        </td>
      </tr>
    </tbody>
  </table>
  `;

  scheduleTableContainer.innerHTML = html;
  showStep(3);
}
